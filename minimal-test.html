<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Mapbox Minimal Test</title>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
    
    <!-- Mapbox GL JS -->
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.12.0/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v3.12.0/mapbox-gl.css" rel="stylesheet">
    
    <style>
        body { margin: 0; padding: 0; }
        #map { position: absolute; top: 0; bottom: 0; width: 100%; }
        
        .status {
            position: absolute;
            top: 10px;
            left: 10px;
            background: white;
            padding: 10px;
            border-radius: 4px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            z-index: 1;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <div class="status" id="status">Loading...</div>
    
    <script>
        const statusEl = document.getElementById('status');
        
        try {
            // Set your Mapbox token directly from Mapbox documentation example
            statusEl.innerHTML = 'Setting token...';
            mapboxgl.accessToken = 'pk.eyJ1IjoiYm9iZXJzIiwiYSI6ImNtYmNqeHdhNjFxZzUya3M5czI3d2VkZnYifQ.U5o08Jy49X6c3eD-6wI0Rg';
            statusEl.innerHTML += '<br>Token set successfully';
            
            // Check if browser supports Mapbox GL
            if (!mapboxgl.supported()) {
                statusEl.innerHTML += '<br>ERROR: Browser does not support Mapbox GL';
                throw new Error('Your browser does not support Mapbox GL');
            }
            
            statusEl.innerHTML += '<br>Browser supports Mapbox GL';
            
            // Create a new map instance with custom style
            statusEl.innerHTML += '<br>Creating map with custom style...';
            const map = new mapboxgl.Map({
                container: 'map', // container ID
                style: 'mapbox://styles/bobers/cmbcnbi7a002e01s5cppo401f', // Custom style provided by user
                center: [13.4050, 52.5200], // Berlin center
                zoom: 11 // starting zoom
            });
            
            statusEl.innerHTML += '<br>Map object created';
            
            // Log when map is loaded
            map.on('load', () => {
                statusEl.innerHTML += '<br>SUCCESS: Map loaded!';
                console.log('Map loaded successfully');
            });
            
            // Handle map errors
            map.on('error', (e) => {
                statusEl.innerHTML += `<br>ERROR: ${e.error ? e.error.message : 'Unknown map error'}`;
                console.error('Map error:', e);
                
                if (e.error && e.error.status === 401) {
                    statusEl.innerHTML += '<br>This is likely a token issue.';
                    statusEl.innerHTML += '<br>Check URL restrictions in your Mapbox account.';
                }
            });
            
        } catch (error) {
            statusEl.innerHTML += `<br>ERROR: ${error.message}`;
            console.error('Initialization error:', error);
        }
    </script>
</body>
</html>